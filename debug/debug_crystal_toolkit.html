<!DOCTYPE html>
<html>
<head>
    <title>Crystal Toolkit 渲染器调试</title>
    <script src="/static/js/plotly.min.js"></script>
    <style>
        #debugPreview {
            width: 800px;
            height: 600px;
            border: 2px solid #007bff;
            margin: 20px auto;
            background: #f8f9fa;
        }
    </style>
</head>
<body>
    <h1>Crystal Toolkit 渲染器调试</h1>
    <div id="debugPreview"></div>
    
    <script src="/static/js/crystal_toolkit_renderer.js"></script>
    <script>
        console.log('🔧 开始调试...');
        
        // 测试数据（模拟NaCl结构）
        const testStructure = {
            formula: "NaCl",
            sites: [
                {
                    coords: [0.0, 0.0, 0.0],
                    species: [{ element: "Na", occu: 1.0 }]
                },
                {
                    coords: [0.5, 0.5, 0.5],
                    species: [{ element: "Cl", occu: 1.0 }]
                }
            ],
            lattice: {
                matrix: [
                    [5.64, 0.0, 0.0],
                    [0.0, 5.64, 0.0],
                    [0.0, 0.0, 5.64]
                ]
            }
        };
        
        console.log('📊 测试结构:', testStructure);
        
        // 初始化渲染器
        if (typeof CrystalToolkitRenderer !== 'undefined') {
            console.log('✅ CrystalToolkitRenderer 找到');
            
            const renderer = new CrystalToolkitRenderer('debugPreview');
            
            setTimeout(() => {
                console.log('🚀 尝试渲染测试结构...');
                const result = renderer.loadStructure(testStructure);
                console.log('📋 渲染结果:', result);
            }, 1000);
            
        } else {
            console.error('❌ CrystalToolkitRenderer 未找到');
        }
    </script>
</body>
</html>